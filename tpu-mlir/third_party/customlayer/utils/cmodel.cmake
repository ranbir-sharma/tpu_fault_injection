if ("$ENV{CUSTOM_LAYER_CHIP_ARCH}" STREQUAL "bm1684x")
  set(CMODEL_CUSTOM_1684X_OUTPUT_FILE cmodel_custom_1684x)
  add_library(${CMODEL_CUSTOM_1684X_OUTPUT_FILE} SHARED ${SRC_FILES})
  target_link_libraries(${CMODEL_CUSTOM_1684X_OUTPUT_FILE} -Wl,--whole-archive $ENV{TPUC_ROOT}/lib/libcmodel_1684x.so -Wl,--no-whole-archive m)
  install(TARGETS ${CMODEL_CUSTOM_1684X_OUTPUT_FILE} LIBRARY DESTINATION lib)
elseif ("$ENV{CUSTOM_LAYER_CHIP_ARCH}" STREQUAL "bm1688")
  set(CMODEL_CUSTOM_1688_OUTPUT_FILE cmodel_custom_1688)
  add_library(${CMODEL_CUSTOM_1688_OUTPUT_FILE} SHARED ${SRC_FILES})
  target_link_libraries(${CMODEL_CUSTOM_1688_OUTPUT_FILE} -Wl,--whole-archive $ENV{TPUC_ROOT}/lib/libcmodel_1688.so -Wl,--no-whole-archive m)
  install(TARGETS ${CMODEL_CUSTOM_1688_OUTPUT_FILE} LIBRARY DESTINATION lib)
else()
  message(FATAL_ERROR "Unknown chip arch: " $ENV{CUSTOM_LAYER_CHIP_ARCH})
endif()
